const {spawn} = require('child_process');
const path = require('path');
const getPred = (filename) => {
    return new Promise((resolve, reject) => {
        var myjson = {}
        const pythonProcess =  spawn('python3', [
            "-u", 
            path.join( __dirname ,'..', '..', 'scripts', 'run.py'),
            filename
            ]);

        pythonProcess.stdout.on('data', (data) => {
            mystr = data.toString();
            myjson = JSON.parse(mystr);
            console.log(myjson);
        });
        
        pythonProcess.stderr.on('data', (data) => {
            console.log("fails")
            console.log(`error:${data}`);
            
        });
        pythonProcess.on('close', () => {
            console.log("Closed");
            resolve(myjson);
        });
        
    
    });
}
module.exports = {getPred};