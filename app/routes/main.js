const express = require('express');
const router = express.Router();
const getPred = require('./getPred');

router.get('/', (req, res, next) => {
  res.render('index.ejs', {
    func: 'main',
    pageTitle: 'MegNav',
    path: '/',
    predict: 0,
    });
});

router.get('/docs', (req, res, next) => {
  res.render('docs.ejs', {
    func: 'docs',
    pageTitle: 'MegNav',
    path: '/',
    predict: 0,
  });
});

router.post('/predict',  async function (req, res, next) {
  const myjson = await getPred.getPred();
  console.log(myjson);
  console.log("Final", myjson.predict);
  res.render('index.ejs', {
    func: 'predict',
    predict: myjson.predict,
    pageTitle: 'MegNav',
    path: '/',
  });
  console.log(myjson.predict);
});

module.exports = router;
